<!doctype html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="DezeStijn"><meta name=description content="Visualing energy consumption and production in Home Assistant&rsquo;s new Energy Dashboard. Featuring the Shelly 3EM."><meta name=keywords content="Sequr,blog,writeup,CTF,challenge,machine,infosec,IT security,hacking,pentesting,cybersecurity,Home Automation,Energy Management,Electricity Metering,Shelly,Home Assistant"><meta name=robots content="noodp"><meta name=theme-color content="#252627"><link rel=canonical href=https://sequr.be/blog/2021/08/monitoring-electricity-consumption-and-production-with-shelly-3em-and-home-assistants-energy-dashboard/><title>Monitoring electricity consumption and production with Shelly 3EM and Home Assistant's Energy Dashboard :: Sequr</title><link rel=stylesheet href=https://sequr.be/main.min.244183cde1a38e0b08f82c11791181288f9aac1cc9618cd6f4e9e7710c5768ba.css integrity="sha256-JEGDzeGjjgsI+CwReRGBKI+arBzJYYzW9OnncQxXaLo=" crossorigin=anonymous><link rel=stylesheet type=text/css href=https://sequr.be/css/table.css><link rel=stylesheet type=text/css href=https://sequr.be/css/menu.css><link rel=apple-touch-icon sizes=180x180 href=https://sequr.be/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://sequr.be/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://sequr.be/favicon-16x16.png><link rel=manifest href=https://sequr.be/site.webmanifest><link rel=mask-icon href=https://sequr.be/safari-pinned-tab.svg color><link rel="shortcut icon" href=https://sequr.be/favicon.ico><meta name=msapplication-TileColor content><meta itemprop=name content="Monitoring electricity consumption and production with Shelly 3EM and Home Assistant's Energy Dashboard"><meta itemprop=description content="Visualing energy consumption and production in Home Assistant’s new Energy Dashboard. Featuring the Shelly 3EM."><meta itemprop=datePublished content="2021-08-18T00:00:00+00:00"><meta itemprop=dateModified content="2021-09-10T00:00:00+00:00"><meta itemprop=wordCount content="2157"><meta itemprop=image content="https://sequr.be/blog/2021/08/monitoring-electricity-consumption-and-production-with-shelly-3em-and-home-assistants-energy-dashboard/cover.png"><meta itemprop=keywords content="Home Automation,Energy Management,Electricity Metering,Shelly,Home Assistant"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sequr.be/blog/2021/08/monitoring-electricity-consumption-and-production-with-shelly-3em-and-home-assistants-energy-dashboard/cover.png"><meta name=twitter:title content="Monitoring electricity consumption and production with Shelly 3EM and Home Assistant's Energy Dashboard"><meta name=twitter:description content="Visualing energy consumption and production in Home Assistant’s new Energy Dashboard. Featuring the Shelly 3EM."><meta property="article:section" content="Home Automation"><meta property="article:published_time" content="2021-08-18 00:00:00 +0000 UTC"># Webmentions
<link rel=webmention href=https://webmention.io/sequr.be/webmention></head><body><div class=container><header class=header><span class=header__inner><a href=https://sequr.be/ style=text-decoration:none><div class=logo><span class=logo__mark>$</span>
<span class=logo__text>lynx sequr.be</span>
<span class=logo__cursor style=background-color:#e68101></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=https://sequr.be/about/>About</a></li><li><a href=https://sequr.be/blog/>Blog</a></li><li><a href=https://sequr.be/privacy/>Privacy</a></li><li><a href=https://sequr.be/shoppinglist/>Shopping</a></li></ul></nav><span class=menu-trigger><svg viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span><span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class="post h-entry"><div class=post-info><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
11 minutes</p></div><article><h1 class="post-title p-name"><a href=https://sequr.be/blog/2021/08/monitoring-electricity-consumption-and-production-with-shelly-3em-and-home-assistants-energy-dashboard/ class=u-url>Monitoring electricity consumption and production with Shelly 3EM and Home Assistant&rsquo;s Energy Dashboard</a></h1><hr><aside id=toc><div class=toc-title>Table of Contents</div><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#measuring-grid-consumption-with-shelly-3em>Measuring grid consumption with Shelly 3EM</a><ul><li><a href=#wiring-in-the-shelly-3em>Wiring in the Shelly 3EM</a><ul><li><a href=#1-de-energize-panel>1. De-energize panel</a></li><li><a href=#2-mount-shelly>2. Mount Shelly</a></li><li><a href=#3-attach-clamps>3. Attach clamps</a></li><li><a href=#4-attach-wires>4. Attach wires</a></li><li><a href=#5-turn-power-back-on>5. Turn power back on</a></li></ul></li><li><a href=#setting-up-the-shelly>Setting up the Shelly</a><ul><li><a href=#1-connecting-with-wifi>1. Connecting with WiFi</a></li><li><a href=#2-firmware-update--extra-config>2. Firmware update & extra config</a></li></ul></li><li><a href=#integrating-shelly-3em-in-home-assistant>Integrating Shelly 3EM in Home Assistant</a></li></ul></li><li><a href=#energy-dashboard>Energy dashboard</a><ul><li><a href=#setup-wizard>Setup Wizard</a><ul><li><a href=#1-electricity-grid>1. Electricity Grid</a></li><li><a href=#2-solar-panels>2. Solar Panels</a></li><li><a href=#3-individual-devices>3. Individual devices</a></li><li><a href=#finish>Finish</a></li></ul></li><li><a href=#make-changes>Make changes</a></li><li><a href=#grid-carbon-footprint>Grid Carbon Footprint</a></li></ul></li></ul></nav></aside><hr><div class="post-content e-content"><h2 id=introduction>Introduction <a href=#introduction>¶</a></h2><p>Next to making our lives easier by automating the boring stuff, many people invest in home automation to save money by reducing energy consumption.
These savings are achieved by turning off devices not in use, lowering the temperature in uninhabited rooms, etc.</p><p>Another method of saving energy is making us aware of our energy consumption so that we can change our behaviour.
This is reflected in many fancy and colourful dashboards displaying the energy consumption of lights, heating, dishwashers, AC, etc. present in the setup of many home automation enthusiasts.</p><p>Not only is reducing our energy consumption &ndash; and thus our energy bill &ndash; healthy for our wallets, it&rsquo;s a necessary part of combatting the ongoing climate change.</p><p>The team behind Home Assistant has decided they wanted to do their part by adding an Energy Dashboard to Home Assistant through which users are able to gain more insights into their own energy consumption and production.<br>More info on the addition of Home Energy Management in Home Assistant can be found in their <a href=https://www.home-assistant.io/blog/2021/08/04/home-energy-management/ title="Energy Management in Home Assistant" target=_blank rel=noopener>blogpost</a>.</p><figure class=center><img src=ha-energy_management.png alt="Logo of Home Assistant Energy Management"><figcaption class=center>Home Energy Management with Home Assistant</figcaption></figure><p>A main part of this dashboard is the visualisation of how much energy is produced and consumed, which devices contribute most to this energy consumption, and at what times energy consumption is highest.
Next to this, additional graphs can be displayed for energy production/consumption and/or individual devices.
The dashboard even allows you to scroll through the data per hour, allowing a detailed view into the energy consumption of your home.</p><figure class=center><img src=ha-energy_diagram.png alt="Diagram of Home Energy Management"><figcaption class=center>Home Energy Management in a diagram</figcaption></figure><p>Knowing for example when our solar production is highest allows us to move our energy consumption to those moments.
Think about doing the laundry or dishes, turning on the AC or charging an electric vehicle (EV) when we have an abundance of energy.
And thanks to home automation, we don&rsquo;t have to manually plug stuff in or press the button on the dishwasher.</p><h2 id=measuring-grid-consumption-with-shelly-3em>Measuring grid consumption with Shelly 3EM <a href=#measuring-grid-consumption-with-shelly-3em>¶</a></h2><p>Before we can visualise our energy consumption and production, we need to collect the data first.</p><p>How we do this exactly will depend on what we have available.<br>Do you have a smart electricity meter in your home and does it have a P1 port? Then <a href=https://www.home-assistant.io/docs/energy/electricity-grid/#connect-using-a-p1-port title="SlimmeLezer - connect using a P1 port" target=_blank rel=noopener>SlimmeLezer</a> will allow you to collect the data on consumption and production.<br>No P1 port? Check <a href=https://www.home-assistant.io/docs/energy/electricity-grid/#reading-the-meter-via-a-pulse-counter title="Home Assistant Glow - reading the meter via pulse counter" target=_blank rel=noopener>Home Assistant Glow</a> out.<br>Or, if you still have a analog meter, the <a href=https://shelly.cloud/knowledge-base/devices/shelly-3em/ title="Shelly 3EM - professional 3 phase energy meter" target=_blank rel=noopener>Shelly 3EM</a> can help you out.</p><p>My situation is a follows:
My house has 3-phase electricity (3x400V+N) with an analog meter and a photovoltaic (PV/solar) installation with a digital meter.
The digital meter of the solar installation only sends updates twice a day to a portal of the installer.</p><p>In this blog post I will describe my experiences installing a Shelly 3EM to monitor the energy coming from or flowing to the grid,
and using either a phototransistor to read the blinking LED on the digital meter or connecting to its serial port to read the data over modbus.</p><h3 id=wiring-in-the-shelly-3em>Wiring in the Shelly 3EM <a href=#wiring-in-the-shelly-3em>¶</a></h3><p>I will be installing the Shelly 3EM according to the 3-phase wiring diagram found in the manual.
More wiring diagrams can be found on the <a href=https://shelly.cloud/knowledge-base/devices/shelly-3em/ title="Shelly 3EM - professional 3 phase energy meter" target=_blank rel=noopener>Shelly Knowledge Base</a> page for the 3EM.</p><figure class=center><img src=shelly-3EM-3phasing.jpg alt="Shelly 3EM 3-phase wiring diagram"><figcaption class=center>Shelly 3EM 3-phase wiring diagram</figcaption></figure><p>A clamp is hooked around the incoming wires for each of the phases. These monitor the current (in Amps) flowing through the wire and its direction.<br>The Shelly is also connected to each of these phases via connections VA, VB and VC, and Neutral. This is to measure the Voltage.<br>Multiplying Amps with Volts gives us an energy consumption/production in Watts.</p><p>Optionally, a contactor or low-load device can be hooked up to the I and O terminals of the Shelly.
For example to disconnect an EV charger when there&rsquo;s no PV production.</p><p>At this moment, the Shelly 3EM does not support electricity theft/leakage detection, which would require an additional clamp around outgoing Neutral wire.</p><figure class=center><img src=shelly-3EM-package.jpg alt="Shelly 3EM with its 3 split core current transformers labeled A, B and C"><figcaption class=center>Shelly 3EM with its 120A clamps labeled A, B and C</figcaption></figure><h4 id=1-de-energize-panel>1. De-energize panel <a href=#1-de-energize-panel>¶</a></h4><p>Before installing the Shelly, make sure you de-energize your panel.
This is usually done be flipping the main electricity cut-off switch, often located near the meter.
Double-check that the inverter of your solar installation also shut off and is not energizing the panel.</p><p><strong>Always</strong> confirm using an electricity detector or multimeter that there&rsquo;s no electricity flowing through the panel before doing modifications!</p><h4 id=2-mount-shelly>2. Mount Shelly <a href=#2-mount-shelly>¶</a></h4><p>Attach the Shelly 3EM to the DIN rail of your panel on a location that&rsquo;ll allow you to easily run the necessary wires.</p><p>You&rsquo;ll also want to take into account the length of wire the clamps have.</p><p>I decided to install the Shelly such that the clip to hold it onto the DIN rail is on top.
The clamps are then attached to the top of the Shelly and the power wires to the bottom.</p><h4 id=3-attach-clamps>3. Attach clamps <a href=#3-attach-clamps>¶</a></h4><p>Hook the current clamps (split core current transformers) around the incoming wires for each phase.</p><p>Note the arrow on the clamps pointing from &ldquo;K&rdquo; to &ldquo;L&rdquo;.
Where &ldquo;L&rdquo; is the grid or the source of the electricity and &ldquo;K&rdquo; is the household.<br>In other words: install the clamps such that the arrow points <em>towards</em> your electricity meter.</p><p>The clamps are labeled A, B and C, and must be plugged into the respective connectors on the Shelly.</p><figure class=center><img src=shelly-3EM-manual-clamps.jpg alt="Clamp orientation explained in manual"><figcaption class=center>Manual showing clamp orientation</figcaption></figure><p>I hooked up the clamps (marked purple in picture below) on the input side of the main differential.
I would have preferred to hang them on the output side, but multiple wires where leaving on that side (to the subpanel, the 2nd differential and the electric stove) making clamping impossible.<br>I can still de-energize the wires by flicking the main breaker at the meter.</p><p><strong>Never</strong> attach a clamp on an energized wire while it&rsquo;s not connected to the Shelly!</p><h4 id=4-attach-wires>4. Attach wires <a href=#4-attach-wires>¶</a></h4><p>Connect wires from the VA, VB and VC terminals to breakers on the different phases.
Make sure their order matches the order in which you attached the clamps (VA on same phase as clamp A, etc.).</p><p>The terminals fit 2.5mm² solid core wires.
I stripped them 10mm on both sides.</p><p>These wires are then ran to 3 different fuses (marked orange below) which each are on a different phase.
The Neutral wire is connected to the same fuse as the Live wire for Phase A (marked A-live and A-neutral).</p><figure class=center><img src=shelly-3EM-installed.jpg alt="Picture of Shelly 3EM installed in panel"><figcaption class=center>Shelly 3EM installed in the bottom-left</figcaption></figure><h4 id=5-turn-power-back-on>5. Turn power back on <a href=#5-turn-power-back-on>¶</a></h4><p>After you&rsquo;ve verified all wires are installed correctly and tightly (pull the wires a few times), you can close the cabinet and re-energize the panel.</p><p>The Shelly&rsquo;s LED will start to flicker, indicating it&rsquo;s in Access Point mode.</p><figure class=center><img src=shelly-3EM-cabinet.jpg alt="Picture of Shelly 3EM with blinking LED"><figcaption class=center>Shelly 3EM active and LED blinking</figcaption></figure><h3 id=setting-up-the-shelly>Setting up the Shelly <a href=#setting-up-the-shelly>¶</a></h3><h4 id=1-connecting-with-wifi>1. Connecting with WiFi <a href=#1-connecting-with-wifi>¶</a></h4><p>While standing near the Shelly 3EM, open up the WiFi settings of your smartphone.
You should see a new WiFi network names <code>shellyem3-&lt;device_ID></code> pop-up.<br>Connect to this WiFi network and accept any prompt saying you don&rsquo;t have internet connectivity.</p><p>Browse to http://192.168.33.1 to open the web portal of the Shelly (for more info, see <a href=https://sequr.be/blog/2021/01/shelly-web-ui-method/ title="Shelly Web UI method :: Sequr" target=_blank rel=noopener>this blogpost</a>).</p><figure class=center><img src=shelly-3EM-webui.png alt="Web UI of the Shelly 3EM"><figcaption class=center>Web UI of the Shelly 3EM</figcaption></figure><p>Open the <code>Internet & Security</code> tab and open the <code>WiFi Mode - Client</code> section.
Check the box next to <code>Connect the Shelly device to an existing WiFi Network</code>, enter your WiFi SSID (network name) and password, and click Save.</p><p>The Shelly will no attempt to connect to the WiFi network you&rsquo;ve entered.
The WiFi network of the Shelly will disappear and your phone will connect to your home&rsquo;s WiFi again.</p><h4 id=2-firmware-update--extra-config>2. Firmware update & extra config <a href=#2-firmware-update--extra-config>¶</a></h4><p>Find the IP address of your Shelly (e.g. in the router tabel) and browse to it to find the Web UI again.</p><p>Under Settings there&rsquo;s an option to pick the transformer type (50A or 120A).
This option appears to have been removed in a later firmware update, so I&rsquo;m not sure how relevant it is anymore.
But it seemed appropriate to me to set it correctly, i.e. 120A.</p><figure class=center><img src=shelly-3EM-transformers.png alt="Current Transformer Type"><figcaption class=center>Pick 120A for each of the channels</figcaption></figure><p>Still in the Settings Menu, scroll down to <code>Firmware Update</code> and press the big button to update the firmware of the Shelly.</p><figure class=center><img src=shelly-3EM-firmware.png></figure><p>Once the Shelly&rsquo;s updated, the webpage should reload and new options will have appeared.</p><p>Under <code>Settings</code> you can now set a <code>Device Name</code> and <code>Channel # Name</code>.
These names will be reflected in Home Assistant once we integrate the Shelly, so it&rsquo;s useful to set a descriptive name here.</p><figure class=center><img src=shelly-3EM-naming.png></figure><p>While still on the Web UI, you can modify the other settings to fit your needs.
You can enable AP Roaming to have the Shelly move to a different Access Point if the signal become too bad.
You can enable <a href=https://sequr.be/blog/2020/10/getting-started-with-mqtt-and-home-assistant-and-shelly/ title="Getting started with MQTT and Home Assistant (and Shelly) :: Sequr" target=_blank rel=noopener>MQTT</a> or set <a href=https://sequr.be/blog/2021/03/shelly-colot-unicast/ title="Shelly ColoT unicast :: Sequr" target=_blank rel=noopener>CoIoT unicast</a> to the IP of your Home Assistant instance.</p><h3 id=integrating-shelly-3em-in-home-assistant>Integrating Shelly 3EM in Home Assistant <a href=#integrating-shelly-3em-in-home-assistant>¶</a></h3><p>Home Assistant will most likely have already discovered the Shelly 3EM on your network.
If it hasn&rsquo;t, setting CoIoT to the IP of your HA instance and rebooting the Shelly should help.</p><p>Click the link in the notification to open the Integrations page which prompt to configure the Shelly.</p><figure class=center><img src=shelly-3EM-HA_discovery.png></figure><p>If HA still didn&rsquo;t automatically discover the Shelly, you can manually add a new Shelly integration.</p><p>Home Assistant will automatically integrate all relevant entities, including the energy meters.</p><figure class=center><img src=shelly-3EM-HA_device.png alt="Home Assistant showing the entities for the Shelly 3EM"><figcaption class=center>Shelly 3EM entities</figcaption></figure><p>Notice how there are meters for Energy (consumption) and Energy Returned (overproduction) for all three phases.
We&rsquo;ll need these entities for our Energy Dashboard.</p><h2 id=energy-dashboard>Energy dashboard <a href=#energy-dashboard>¶</a></h2><p>Now that we have our sensors setup collecting the data we need, we can add them to the Energy Dashboard.</p><h3 id=setup-wizard>Setup Wizard <a href=#setup-wizard>¶</a></h3><p>To start, go to the <a href=https://my.home-assistant.io/redirect/config_energy title="Home Assistant energy configuration page" target=_blank rel=noopener>energy configuration page</a> and follow the wizard.</p><h4 id=1-electricity-grid>1. Electricity Grid <a href=#1-electricity-grid>¶</a></h4><p>In this first step, we add the sensors that contain the data of the energy flow between our house and the grid.
This will be the sensors from the Shelly 3EM.</p><p>Add the &ldquo;Energy&rdquo; sensors for the 3 phases as &ldquo;Grid Consumption&rdquo;.</p><figure class=center><img src=ha-energy_step1_phasea.png alt="Adding Phase A Energy as Grid Consumption meter"><figcaption class=center>Adding Phase A Energy</figcaption></figure><p>If you know the cost of your electricity or have an integration that provides you with this data, you can configure this here as well.
This will allow you to not only track your electricity consumption, but also how much it&rsquo;s costing you.</p><p>Do the same for the other 2 &ldquo;Energy&rdquo; meters and and the &ldquo;Energy Returned&rdquo; meters under the &ldquo;Return to Grid&rdquo; section.
Here you&rsquo;ll also be able to provide the price you get paid for the electricity you put back on the grid.</p><figure class=center><img src=ha-energy_step1.png alt="Energy Dashboard - step 1 of 3"><figcaption class=center>Electricity grid meters</figcaption></figure><h4 id=2-solar-panels>2. Solar Panels <a href=#2-solar-panels>¶</a></h4><p>In the 2nd part of the wizard, you can add the meter for your solar production.</p><figure class=center><img src=ha-energy_step2.png alt="Energy Dashboard - step 2 of 3"><figcaption class=center>Solar production meters</figcaption></figure><h4 id=3-individual-devices>3. Individual devices <a href=#3-individual-devices>¶</a></h4><p>In this final part of the wizard, you can add meters for individual devices for which you want to specifically track their consumption.</p><p>For example, a sensor on your Electric Vehicle (EV) charger or your aircondition.</p><figure class=center><img src=ha-energy_step3.png alt="Energy Dashboard - step 3 of 3"><figcaption class=center>Individual device tracking</figcaption></figure><h4 id=finish>Finish <a href=#finish>¶</a></h4><p>When you now close the wizard by clicking <code>Show me my energy dashboard</code>, you&rsquo;ll notice it&rsquo;s still pretty empty.</p><p>This is, as the message on the graph explains, because data still needs to be imported and parsed.
Don&rsquo;t worry, eventually you&rsquo;ll see your data appear here, give it some time.</p><figure class=center><img src=ha-energy_dashboard_unpopulated.png alt="Energy Dashboard - currently still empty"><figcaption class=center>There is no data to show. It can take up to 2 hours for new data to arrive after you configure your energy dashboard.</figcaption></figure><figure class=center><img src=ha-energy_dashboard.png alt="Energy Dashboard - with some data in it"><figcaption class=center>After a few hours, data will start to appear</figcaption></figure><p>Note that the dashboard above doesn&rsquo;t include a sensor for my PV installation yet.
So data on solar energy production isn&rsquo;t included in this dashboard yet.</p><p>The dashboard does show my &lsquo;overproduction&rsquo;, which is reflected in &lsquo;Phase B Energy Returned&rsquo; as my solar panels are hooked up to Phase B.
But at this moment I&rsquo;m missing how much energy I&rsquo;m consuming directly from the PV, and thus not asking from the grid.</p><p>Adding a meter on my solar systems output line would allow me to see how much energy is produced and how much of it was directly consumed.
This will also give me better insights in the total energy consumption of my house.<br>That will be food for <a href=https://sequr.be/blog/2021/08/reading-ginlong-solis-inverter-over-serial-and-importing-in-home-assistant-over-mqtt/ title="Reading Ginlong Solis inverter over serial and importing in Home Assistant over MQTT" target=_blank rel=noopener>a new blog post</a> :)</p><h3 id=make-changes>Make changes <a href=#make-changes>¶</a></h3><p>To want to make changes to your Energy Dashboard, go to Configuration > Energy.
Here you can modify the sensors you&rsquo;re using for grid consumption/return, solar panel production, individual device tracking and the Grid Carbon Footprint.</p><p>To modify the currency used for cost calculations, go to Configuration > General.</p><figure class=center><img src=ha-energy_configuration.png alt="Energy Dashboard - configuration screen"><figcaption class=center>Configuration screen for HA Energy Dashboard</figcaption></figure><h3 id=grid-carbon-footprint>Grid Carbon Footprint <a href=#grid-carbon-footprint>¶</a></h3><p>You can optionally add a &ldquo;Grid carbon footprint&rdquo; sensor as well.</p><p>This service will show you how much of your home&rsquo;s electricity grid comes from Fossil Fuels and what its CO2 intensity is.
Based on this data, you can steer your electricity consumption as to use electricity when its carbon footprint is lowest.</p><p>To add this service, you&rsquo;ll need to add your email address to the <a href=https://co2signal.com/#signup title="CO2 Signal" target=_blank rel=noopener>CO2 Signal</a> mailing list so you can get an API key.</p><figure class=center><img src=ha-co2signal.png alt="CO2 signal entities"><figcaption class=center>CO2 Signal</figcaption></figure></div></article><hr><div class=post-info><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>
<span class=tag><a href=https://sequr.be/tags/home-automation/>Home Automation</a></span>
<span class=tag><a href=https://sequr.be/tags/energy-management/>Energy Management</a></span>
<span class=tag><a href=https://sequr.be/tags/electricity-metering/>Electricity Metering</a></span>
<span class=tag><a href=https://sequr.be/tags/shelly/>Shelly</a></span>
<span class=tag><a href=https://sequr.be/tags/home-assistant/>Home Assistant</a></span></p><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
<span class=tag><a class=p-category href=https://sequr.be/categories/home-automation/>Home Automation</a></span></p><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
2157 Words</p><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<time class=dt-published datetime=2021-08-18T00:00:00+00:00>2021-08-18
</time>(Last updated: <time class=dt-updated datetime=2021-09-10T00:00:00+00:00>2021-09-10</time>)</p><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
<span rel=author class="p-author h-card">DezeStijn</span></p></div><hr><div class=sharing-buttons><a class=resp-sharing-button__link href=https://ko-fi.com/s4squatch target=_blank rel=noopener aria-label title="Buy me a coffee"><div class="resp-sharing-button resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604.0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734 4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09-.443-.441-3.368-3.049-4.034-3.954-.709-.965-1.041-2.7-.091-3.71.951-1.01 3.005-1.086 4.363.407.0.0 1.565-1.782 3.468-.963 1.904.82 1.832 3.011.723 4.311zm6.173.478c-.928.116-1.682.028-1.682.028V7.284h1.77s1.971.551 1.971 2.638c0 1.913-.985 2.667-2.059 3.015z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fsequr.be%2fblog%2f2021%2f08%2fmonitoring-electricity-consumption-and-production-with-shelly-3em-and-home-assistants-energy-dashboard%2f" target=_blank rel=noopener aria-label title="Share on facebook"><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fsequr.be%2fblog%2f2021%2f08%2fmonitoring-electricity-consumption-and-production-with-shelly-3em-and-home-assistants-energy-dashboard%2f" target=_blank rel=noopener aria-label title="Share on twitter"><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://reddit.com/submit/?url=https%3a%2f%2fsequr.be%2fblog%2f2021%2f08%2fmonitoring-electricity-consumption-and-production-with-shelly-3em-and-home-assistants-energy-dashboard%2f&amp;resubmit=true&amp;title=Monitoring%20electricity%20consumption%20and%20production%20with%20Shelly%203EM%20and%20Home%20Assistant%27s%20Energy%20Dashboard" target=_blank rel=noopener aria-label title="Share on reddit"><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none"><path d="M12 0A12 12 0 000 12a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0012 0zm5.01 4.744c.688.0 1.25.561 1.25 1.249a1.25 1.25.0 01-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968.0 1.754.786 1.754 1.754.0.716-.435 1.333-1.01 1.614a3.111 3.111.0 01.042.52c0 2.694-3.13 4.87-7.004 4.87s-7.004-2.176-7.004-4.87c0-.183.015-.366.043-.534A1.748 1.748.0 014.028 12c0-.968.786-1.754 1.754-1.754.463.0.898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342.0 01.14-.197.35.35.0 01.238-.042l2.906.617a1.214 1.214.0 011.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687.0 1.248-.561 1.248-1.249S9.937 12 9.249 12zm5.5.0c-.687.0-1.248.561-1.248 1.25.0.687.561 1.248 1.249 1.248S16 13.937 16 13.249c0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327.0 00-.231.094.33.33.0 000 .463c.842.842 2.484.913 2.961.913s2.105-.056 2.961-.913a.361.361.0 00.029-.463.33.33.0 00-.464.0c-.547.533-1.684.73-2.512.73-.828.0-1.979-.196-2.512-.73a.326.326.0 00-.232-.095z"/></svg></div></div></a><a class=resp-sharing-button__link href="mailto:?subject=Monitoring%20electricity%20consumption%20and%20production%20with%20Shelly%203EM%20and%20Home%20Assistant%27s%20Energy%20Dashboard&amp;body=https%3a%2f%2fsequr.be%2fblog%2f2021%2f08%2fmonitoring-electricity-consumption-and-production-with-shelly-3em-and-home-assistants-energy-dashboard%2f" target=_self rel=noopener aria-label title="Share via email"><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></div></div></a></div><div class=pagination><div class=pagination__buttons><span class="button previous"><a href=https://sequr.be/blog/2021/08/reading-ginlong-solis-inverter-over-serial-and-importing-in-home-assistant-over-mqtt/><span class=button__icon>←</span>
<span class=button__text>Reading Ginlong Solis inverter over serial and importing in Home Assistant over MQTT</span>
</a></span><span class="button next"><a href=https://sequr.be/blog/2021/08/playing-webradio-and-other-audio-from-lovelace-dashboard/><span class=button__text>Playing webradio (and other audio) from Lovelace dashboard</span>
<span class=button__icon>→</span></a></span></div></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2019</span>
<span><a class=h-card rel=me href=https://sequr.be/>DezeStijn</a></span>
<span><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank rel=noopener>CC BY-NC-SA 4.0</a></span>
<span><a href=https://sequr.be/blog/index.xml target=_blank title=rss><svg width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div></footer></div><script type=text/javascript src=https://sequr.be/bundle.min.e89fda0f29b95d33f6f4224dd9e5cf69d84aff3818be2b0d73e731689cc374261b016d17d46f8381962fb4a1577ba3017b1f23509d894f6e66431f988c00889e.js integrity="sha512-6J/aDym5XTP29CJN2eXPadhK/zgYvisNc+cxaJzDdCYbAW0X1G+DgZYvtKFXe6MBex8jUJ2JT25mQx+YjACIng=="></script></body></html>